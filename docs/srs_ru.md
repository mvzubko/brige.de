# Спецификация Требований к Программному Обеспечению для Brige Service Management

## Оглавление

1. [Введение](#1-введение)  
    1.1. [Цель документа](#11-цель-документа)  
    1.2. [Область применения](#12-область-применения)  
    1.3. [Определения, сокращения и аббревиатуры](#13-определения-сокращения-и-аббревиатуры)  

2. [Общее описание системы](#2-общее-описание-системы)  
    2.1. [Общий взгляд на систему](#21-общий-взгляд-на-систему)  
    2.2. [Классы и характеристики пользователей](#22-классы-и-характеристики-пользователей)  
    2.3. [Операционная среда](#23-операционная-среда)  
    2.4. [Предположения и зависимости](#24-предположения-и-зависимости)  
    2.5. [Ограничения](#25-ограничения)  

3. [Функциональные требования](#3-функциональные-требования)  
    3.1. [Регистрация заявок](#31-регистрация-заявок)  
    3.2. [Регистрация выполненных работ](#32-регистрация-выполненных-работ)  
    3.3. [Подтверждение выполненной работы](#33-подтверждение-выполненной-работы)  
    3.4. [Отправка отчётов](#34-отправка-отчётов)  
    3.5. [Формирование отчётов и аналитика](#35-формирование-отчётов-и-аналитика)  
    3.6. [Администрирование и управление пользователями](#36-администрирование-и-управление-пользователями)  

4. [Нефункциональные требования](#4-нефункциональные-требования)  
    4.1. [Работа в офлайн-режиме](#41-работа-в-офлайн-режиме)  
    4.2. [Безопасность](#42-безопасность)  
    4.3. [Производительность](#43-производительность)  
    4.4. [Удобство использования](#44-удобство-использования)  
    4.5. [Надёжность](#45-надёжность)  
    4.6. [Энергоэффективность](#46-энергоэффективность)  

5. [Требования к интерфейсам](#5-требования-к-интерфейсам)  
    5.1. [Пользовательский интерфейс](#51-пользовательский-интерфейс)  
    5.2. [Интеграция и API](#52-интеграция-и-api)  

6. [Системные и аппаратные требования](#6-системные-и-аппаратные-требования)  
    6.1. [Системные требования](#61-системные-требования)  
    6.2. [Аппаратные требования](#62-аппаратные-требования)  

7. [Технический стэк и архитектурное решение](#7-технический-стэк-и-архитектурное-решение)  
    7.1. [Общая архитектура](#71-общая-архитектура)  
    7.2. [Управление пользователями и безопасность](#72-управление-пользователями-и-безопасность)  
    7.3. [Интеграция и коммуникация](#73-интеграция-и-коммуникация)  
    7.4. [Мониторинг и обслуживание](#74-мониторинг-и-обслуживание)  

8. [Обучение и документирование](#8-обучение-и-документирование)  
    8.1. [Обучение пользователей](#81-обучение-пользователей)  
    8.2. [Материалы для обучения](#82-материалы-для-обучения)  
    8.3. [Техническая документация](#83-техническая-документация)  

9. [Приложения](#9-приложения)  
    - [Приложение A: Макеты интерфейса](ui.md)

---

> Для корректной работы ссылок оглавление рекомендуется размещать сразу после заголовка документа.

## 1. Введение

### 1.1. Цель документа
Данный документ описывает функциональные и нефункциональные требования к разработке системы Brige Service Management, предназначенной для автоматизации учёта сервисных работ на объектах клиентов. 

Целью системы является упрощение процесса регистрации выполненных работ, управление заявками, хранение медиаданных и интеграция с внешними сервисами. Документ служит основой для разработки, тестирования и внедрения системы, а также для обеспечения соответствия требованиям безопасности и производительности.

### 1.2. Область применения
Система Brige Service Management будет размещена на защищённом домене и предназначена для использования только авторизованными сотрудниками компании. Основные функции системы:
- Ведение учёта и регистрации выполненных работ.
- Управление заявками, распределение задач и хранение медиаданных (изображений, документов).
- Фиксации снимков, описаний и другой информации, необходимой для анализа и планирования работ.
- Организации рабочего процесса.

### 1.3. Определения, сокращения и аббревиатуры
- SRS – Спецификация Требований к Программному Обеспечению.
- GDPR – Общий регламент защиты данных.
- SSL – Технология шифрования данных.
- API – Интерфейс для взаимодействия приложений.
- Keycloak – платформа для управления аутентификацией и авторизацией, используемая для единого SSO и разграничения доступа.
- PostgreSQL – реляционная система управления базами данных, выбранная для хранения основных данных системы.
- Redis – хранилище данных в памяти, используемое для кэширования и ускорения доступа к часто запрашиваемой информации.
- Brige Service Management – система для автоматизации и учёта работ на объектах клиентов.
- Brige Client – кроссплатформенное клиентское приложение для доступа к функционалу системы.

## 2. Общее описание системы

### 2.1. Общий взгляд на систему
Brige Service Management – это новая система, которая заменяет текущие ручные процессы управления заявками, выдачи заказ-нарядов на выполнение работ, регистрации выполненных работ и других рабочих процессов компании. 

Система будет включать в себя клиентское приложение (Brige Client) для мобильных устройств, а также администраторский интерфейс для управления пользователями и настройками системы.

В контексте данного  документа под системой понимается взаимосвязанная структура, состоящая из следующих компонентов:
  -	сервиса управления заявками, в том числе:
    -	регистрации заявок
    -	выдачи заказ-нарядов на выполнение работ исполнителям
    -	управления приоритетами и сроками выполнения заявок
    - отслеживания статуса выполнения задач
    -	анализе выполненных работ
  -	сервиса управления пользователями, в том числе:
    -	аутентификации и авторизации пользователей
    -	регистрации пользователей
    -	управления ролями и правами доступа
  -	сервиса управления работами, в том числе:
    - регистрации выполненных работ
    -	учёта использованных материалов
    -	загрузки фотографий и документов, подтверждающих выполненные работы
    -	подтверждения выполненных работ клиентами
    -	заказа материалов и оборудования
  -	сервиса управления данными, в том числе:
    -	хранения и аналитической обработки заявок, работ и медиаданных
    -	обеспечения безопасности данных (шифрование, авторизация)
  -	сервиса отчётности, в том числе:
    -	формирования отчётов по заявкам, работам и пользователям
    -	экспорта данных в различные форматы (PDF, Excel)
  -	сервиса интеграции с внешними системами, в том числе:
    -	интеграции с почтовым сервером для отправки отчётов
  -	мобильного приложения Brige Client, для IOS, Android, Windows и Linux
  -	сервиса мониторинга и логирования (вторая очередь), в том числе:
    -	мониторинга состояния системы и производительности
    -	логирования событий и ошибок для диагностики и устранения неисправностей
  -	сервиса уведомлений (вторая очередь), в том числе:
    -	отправки уведомлений пользователям о статусе заявок и выполненных работах
    -	корпоративный чат для обмена сообщениями между пользователями

Система будет разрабатываться с использованием современных технологий и подходов, включая микросервисную архитектуру, контейнеризацию и облачные решения. Основное внимание будет уделено безопасности, производительности и удобству использования.

### 2.2. Классы и характеристики пользователей
| Класс пользователей | Описание |
| ------------------- | -------- |
| ***Клиент (обычный)*** | Клиент - это авторизованный пользователь ПО Brige Client, который может самостоятельно регистрировать заявки на выполнение работ в системеме, отслеживать прогресс их выполнения, а также подтвержать фактическое выполнение работ и оставлять отзывы. |
| ***Сервисный техник*** | Сервисный техник - это авторизованный пользователь ПО Brige Client, который получает заявки на выполнение сервисных работ и может регистрировать выполненные работы, загружать медиаданные, изменять статус заявки, оформлять заявки руководству компании на сырье и материалы, необходимые для выполнения работ |
| ***Менеджер по продажам*** | Менеджер по продажам - это авторизованный пользователь ПО Brige Client, который занимается исследованием потребностей клиентов, предлагает решения и услуги компании, а также может регистрировать заявки на выполнение работ. |
| ***Оператор*** | Оператор - это авторизованный пользователь ПО Brige Client, который имеет доступ к административной части ПО и может управлять пользователями, настраивать права доступа, просматривать отчёты и статистику по выполненным работам. Оператор также рассматривает заявки на выполнение работ, распределяет их между сервисными техниками и контролирует их выполнение, а также может взаимодействовать с клиентами для уточнения деталей заявок и получения обратной связи. |
| ***Администратор*** | Администратор - это авторизованный пользователь, который имеет полный доступ к системе, включая управление пользователями, настройку интеграции с внешними сервисами, мониторинг состояния системы и управление безопасностью. Администратор также отвечает за техническую поддержку и решение проблем пользователей. |

### 2.3. Операционная среда
Операционная среда, на которой развернута система, должна удовлетворять следующим требованиям:

#### OC-1. Операционная система 
Система будет работать на современных операционных системах, таких как Linux (например, Ubuntu, CentOS) для серверной части и Android, iOS, Windows и Linux для клиентского приложения Brige Client.
#### OC-2. Среда запуска приложений
Система будет развернута на сервере с поддержкой современных веб-технологий, включая поддержку HTTPS и SSL для обеспечения безопасности передачи данных. 
#### OC-3. База данных
Система будет использовать PostgreSQL в качестве основной базы данных для хранения заявок, работ, пользователей и медиаданных. Redis будет использоваться для кэширования часто запрашиваемой информации и ускорения доступа к данным.
#### OC-4. Веб-сервер
Система будет использовать собственный веб-сервер, либо Nginx или Apache, в качестве обратного прокси-сервера для обработки входящих запросов и маршрутизации их к соответствующим микросервисам. Веб-сервер будет настроен для работы с HTTPS и SSL, обеспечивая безопасность передачи данных между клиентами и сервером.
#### OC-5. Мобильное приложение Brige Client
Brige Client будет разработан с использованием Flutter, что обеспечит кроссплатформенность и возможность работы на Android, iOS, Windows и Linux. 
#### OC-6. Контейнеризация и оркестрация
Система будет развернута в контейнерах с использованием Docker, что обеспечит изоляцию сервисов и упрощение процесса развертывания. Kubernetes будет использоваться для оркестрации контейнеров, управления масштабированием и обеспечения высокой доступности системы.
#### OC-7. Интерфейсы обмена данными
Система будет интегрирована с корпоративными сервисами почты и др. через RESTful API. Для межсервисного взаимодействия будет использоваться gRPC или REST API, что обеспечит гибкость и масштабируемость системы.
#### OC-8. Безопасность
Система будет размещена на защищённом домене с использованием SSL-сертификатов для шифрования данных. Авторизация пользователей будет осуществляться через Keycloak, что обеспечит централизованное управление пользователями и поддержку SSO (единой точки входа). Все данные будут храниться в соответствии с требованиями GDPR, включая шифрование персональных данных (при их наличии в системе) и ограничение доступа к ним.
#### OC-9. Мониторинг и логирование
Система будет включать сервис мониторинга и логирования, который будет отслеживать состояние системы, производительность и ошибки. Логи будут храниться в централизованном хранилище для последующего анализа и диагностики проблем. Для мониторинга состояния системы будет использоваться Prometheus или аналогичный инструмент, а для визуализации данных - сервис Grafana.

### 2.4. Предположения и зависимости
- Система должна быть доступна только авторизованным пользователям.
- Приложение Brige Client нормально функционирует только при условии, что серверная часть системы нормально функционирует и доступна посресредством сети Интернет.
- Пользователи должны иметь стабильное интернет-соединение для работы с системой в момент загрузки медиаданных и синхронизации данных.
- На устройствах пользователей должно быть достаточно свободного места для хранения данных приложения Brige Client, включая медиаданные.

### 2.5. Ограничения
- Система должна быть доступна только через защищённый веб-интерфейс (SSL-шлюз).
- Авторизация пользователей осуществляется по логину и паролю.
- Обработка и хранение данных должны соответствовать требованиям европейских стандартов.
- Система должна обеспечивать возможность работы в офлайн-режиме для мобильного клиента Brige Client, с последующей синхронизацией данных при восстановлении соединения.
- Работа системы не должна приводить к значительному расходу заряда батареи мобильных устройств, особенно в офлайн-режиме и при слабом покрытии сети. 

## 3. Функциональные требования
### 3.1. Регистрация заявок
#### 3.1.1. Состав функционала
- Система должна обеспечивать автоматическую генерацию уникального номера обращения/заказа при её создании.
- Пользователи с ролью "Оператор", либо "Менеджер по продажам" должны иметь возможность вводить данные о заявке, включая:
  - ***Имя клиента** (не понятно что подразумевается под именем клиента, возможно это ФИО контактного лица или имя компании, возможно сущесвуют клиенты физлица и юрлица)???*
  - Наименование компании клиента
  - Адрес клиента
  - Контактное лицо клиента
  - Контактный номер клиента
- Пользователи с ролью "Оператор" должны иметь возможность вводить данные о сервисном технике, включая:
  - Имя техника
  - Название компании (BRIGE, BRIGE Service UG, Conveyor System UG и т.д.)
  - Планируемая дата визита
  - Планируемое время прибытия 
- Система должна поддерживать возможность выбора типа планируемой работы:
  - Установка
  - Ремонт
  - Техническое обслуживание
  - Осмотр
  - Коммерческий визит
  - Консультация
  - Другое (с возможностью ввода текстового описания)
#### 3.1.2. Детальное описание функционала
---
| Функция | Описание |
| ------- | -------- |
| **Заявка.Создание\*** |  |
| &nbsp;&nbsp;&nbsp;&nbsp;.ПроверкаРегистрации | Система должна проверить, зарегистрирован ли пользователь в базе. |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.НетРегистрации | Если пользователь не зарегистрирован, система предлагает следующие варианты: </br>&nbsp;&nbsp; - Зарегистрироваться сейчас. </br>&nbsp;&nbsp; - Продолжить оформление заявки с ограниченным функционалом. </br>&nbsp;&nbsp; - Отменить оформление заявки. |
| &nbsp;&nbsp;&nbsp;&nbsp;.ДанныеКлиента | Заполнение данных клиента. |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.НаименованиеКлиента: | Ввод наименования компании-клиента с возможностью выбора из списка (для уже существующих клиентов) или ввода нового значения (для новых клиентов). |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.АдресКлиента | Ввод адреса клиента с автоматической проверкой формата (например, наличие города, улицы и номера дома). |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.КонтактноеЛицо | Ввод ФИО контактного лица. |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.КонтактныйНомер | Контактный номер телефона клиента с проверкой на корректный формат. |
| &nbsp;&nbsp;&nbsp;&nbsp;.ДанныеСервисногоТехника* | Заполнение данных сервисного техника |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.КомпанияТехника | Выпадающий список с доступными компаниями (BRIGE, BRIGE Service UG, Conveyor System UG и т.д.). | 
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.ВыборТехника | Выпадающий список с доступными сервисными техниками, выбранной компании. |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.ДатаВизита | Выбор даты визита через календарь с проверкой на актуальность даты. |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.ВремяПрибытия | Ввод предполагаемого времени прибытия в формате HH:MM с валидацией корректности введенных данных. |
| &nbsp;&nbsp;&nbsp;&nbsp;.ТипРаботы | Пользователь выбирает тип планируемой работы через чекбоксы: </br>&nbsp;&nbsp; - Установка </br>&nbsp;&nbsp; - Ремонт </br>&nbsp;&nbsp; - Техническое обслуживание </br>&nbsp;&nbsp; - Осмотр </br>&nbsp;&nbsp; - Коммерческий визит </br>&nbsp;&nbsp; - Консультация </br>&nbsp;&nbsp; - Другое |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.ВыбраноДругое | Появляется текстовое поле для детального описания типа работы. |
| &nbsp;&nbsp;&nbsp;&nbsp;.Подтверждение | Пользователь подтверждает введенные данные и отправляет заявку на обработку. |
| &nbsp;&nbsp;&nbsp;&nbsp;.Уведомление | Система отправляет уведомление о создании заявки и сохраняет заявку в базе данных. |
---
\* Заявка.Создание может быть реализована в двух вариантах:
- **Вариант 1**: Пользователи с ролью "Оператор" или "Менеджер по продажам" могут создавать заявки, вводя необходимые данные о клиенте и сервисном технике, типе работы и планируемой дате визита.
- **Вариант 2**: Пользователи с ролью "Клиент" могут создавать заявки, вводя необходимые данные о себе и типе работы, которую они хотят заказать.

### 3.2. Регистрация выполненных работ
#### 3.2.1. Состав функционала
- Система должна позволять пользователям с ролью "Сервисный техник" регистрировать выполненные работы, включая текстовое описание, использованные материалы и дополнительные задачи.
- Система должна поддерживать возможность указания срочности дополнительных работ (низкая, средняя, высокая, критическая).
- Система должна поддерживать возможность загрузки медиаданных (фотографий, документов) для подтверждения выполненных работ.
- Система должна автоматически фиксировать время начала и завершения работы.
#### 3.2.2. Детальное описание функционала
| Функция                          | Описание |
| -------------------------------- | -------- |
| **Работа.Регистрация**           | Детальное оформление процесса регистрации выполненных работ. |
| &nbsp;&nbsp;&nbsp;&nbsp;.Старт   | Пользователь с ролью "Сервисный техник" нажимает кнопку "Начать работу".<br>- Система автоматически сохраняет время начала работы.<br>- Фиксируется геолокация (при наличии разрешения).<br>- Запускается таймер для отслеживания продолжительности работы. <br>- Система меняет статус заявки на "В работе". |
| &nbsp;&nbsp;&nbsp;&nbsp;.ОписаниеРабот | Пользователь указывает этапы выполненной работы и особенности исполнения.<br>Поддерживается базовое форматирование текста. |
| &nbsp;&nbsp;&nbsp;&nbsp;.Материалы | Пользователь выбирает материалы из выпадающего списка |
| &nbsp;&nbsp;&nbsp;&nbsp;.Задачи | Ввод описания дополнительной задачи (при необходимости).<br>Выбор срочности задачи (Низкая, Средняя, Высокая, Критическая).<br> Возможность добавления нескольких задач. |
| &nbsp;&nbsp;&nbsp;&nbsp;.Медиа | Возможность множественной загрузки изображений и документов.<br> Система проверяет формат и размер файлов, выводит сообщения об ошибках, если обнаружены несоответствия. |
| &nbsp;&nbsp;&nbsp;&nbsp;.Пауза | При необходимости пользователь может временно приостановить выполнение работы.<br> Система останавливает таймер и сохраняет время паузы. |
| &nbsp;&nbsp;&nbsp;&nbsp;.Продолжение | После устранения причины паузы пользователь нажимает "Продолжить работу".<br> Система возобновляет таймер с учетом ранее прерванного времени. |
| &nbsp;&nbsp;&nbsp;&nbsp;.Завершение  | По окончании работы пользователь фиксирует её завершение.<br>- Система автоматически сохраняет время окончания работы и рассчитывает общее время выполнения.<br>- Заявка переводится в статус "Выполнено". |
--

### 3.3. Подтверждение выполненной работы
#### 3.3.1. Состав функционала
- Система должна предоставлять форму для подтверждения успешности выполнения работы, включая возможность ввода комментариев клиента.
- Система должна поддерживать получение цифровой подписи клиента для подтверждения выполненных работ.
#### 3.3.2. Детальное описание функционала
---
| Функция | Описание |
| ------- | -------- |
| **Работа.Подтверждение** |  |
| &nbsp;&nbsp;&nbsp;&nbsp;.Выполнено | Клиент может выбрать "Да" или "Нет" для подтверждения успешности выполнения работы. |
| &nbsp;&nbsp;&nbsp;&nbsp;.Комментарий | Клиент может оставить комментарий о выполненной работе. |
| &nbsp;&nbsp;&nbsp;&nbsp;.Имя | Клиент вводит своё имя  |
| &nbsp;&nbsp;&nbsp;&nbsp;.Подпись | Клиент может нарисовать свою подпись на экране устройства. |
| &nbsp;&nbsp;&nbsp;&nbsp;.Подтверждение | При нажатии кнопки "Подтвердить" система должна выполнить следующие действия: </br>&nbsp;&nbsp; - Сохранить комментарий и подпись клиента. </br>&nbsp;&nbsp; - Изменить статус заявки на "Завершено". |
---

### 3.4. Отправка отчётов
#### 3.4.1. Состав функционала
- Система должна автоматически отправлять заполненные формы и отчёты на сервер, на указанный корпоративный адрес (например на *info@brige.de*), а также на адрес клиента.
#### 3.3.2. Детальное описание функционала
---
| Функция | Описание |
| ------- | -------- |
| **Отчёт.Отправка** |  |
| &nbsp;&nbsp;&nbsp;&nbsp;.Отправка.Варианты | Система должна предоставлять следующие варианты отправки отчётов в виде чекбоксов: </br>&nbsp;&nbsp; - Отправить на сервер (всегда включено). </br>&nbsp;&nbsp; - Отправить на корпоративный email. </br>&nbsp;&nbsp; - Отправить на личный email клиента. |
| &nbsp;&nbsp;&nbsp;&nbsp;.EmailКлиента | Если выбрано "Отправить на личный email клиента", система должна запросить адрес электронной почты клиента. |
| &nbsp;&nbsp;&nbsp;&nbsp;.ФорматОтчёта | Система должна предоставлять возможность выбора формата отчёта: </br>&nbsp;&nbsp; - PDF (по умолчанию) </br>&nbsp;&nbsp; - Excel </br>&nbsp;&nbsp; - Оба формата. |
| &nbsp;&nbsp;&nbsp;&nbsp;.Отправка | При нажатии кнопки "Отправить" система должна выполнить следующие действия: </br>&nbsp;&nbsp; - Сформировать отчёты в выбранных форматах. </br>&nbsp;&nbsp; - Отправить отчёты на сервер и на указанные email-адреса. </br>&nbsp;&nbsp; - Вывести сообщение об успешной отправке или ошибке. </br> Статус заявки должен быть изменён на "Отправлено". | 
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.НетСети | Если нет доступа к интернету, система должна сохранить отчёт локально и попытаться отправить его при следующем подключении к сети. </br> Статус заявки должен быть изменён на "Отправка". |
| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.СетьВосстановлена | При восстановлении соединения система должна автоматически попытаться отправить ранее сохранённые отчёты. </br> Статус заявки должен быть изменён на "Отправлено". |
---

### 3.5. Формирование отчётов и аналитика
#### 3.5.1. Состав функционала
- Система должна предоставлять возможность формирования отчётов по заявкам, выполненным работам и пользователям за определённый период времени.
- Система должна поддерживать экспорт данных в различные форматы (PDF, Excel) для дальнейшего анализа и отчётности.
#### 3.5.2. Детальное описание функционала
---
| Функция | Описание |
| ------- | -------- |
| **Отчёт.Формирование** |  |
| &nbsp;&nbsp;&nbsp;&nbsp;.Период | Пользователь выбирает период для формирования отчёта (начальная и конечная дата). | 
| &nbsp;&nbsp;&nbsp;&nbsp;.ТипОтчёта | Пользователь выбирает тип отчёта: </br>&nbsp;&nbsp; - По заявкам </br>&nbsp;&nbsp; - По выполненным работам </br>&nbsp;&nbsp; - По пользователям. |
| &nbsp;&nbsp;&nbsp;&nbsp;.ФорматОтчёта | Пользователь выбирает формат отчёта: </br>&nbsp;&nbsp; - PDF </br>&nbsp;&nbsp; - Excel </br>&nbsp;&nbsp; - Оба формата. |
| &nbsp;&nbsp;&nbsp;&nbsp;.Фильтры | Пользователь может применить фильтры для уточнения данных в отчёте: </br>&nbsp;&nbsp; - По пользователям </br>&nbsp;&nbsp; - По статусам заявок </br>&nbsp;&nbsp; - По типам работ. |
| &nbsp;&nbsp;&nbsp;&nbsp;.Сформировать | При нажатии кнопки "Сформировать отчёт" система должна выполнить следующие действия: </br>&nbsp;&nbsp; - Собрать данные за указанный период. </br>&nbsp;&nbsp; - Сформировать отчёт в выбранном формате. </br>&nbsp;&nbsp; - Вывести отчёт на экран и/или сохранить его локально. </br>&nbsp;&nbsp; - Предложить пользователю скачать отчёт или отправить его по электронной почте. |
---

### 3.6. Администрирование и управление пользователями
#### 3.6.1. Состав функционала
- Система должна предоставлять администраторский интерфейс для управления пользователями, ролями и правами доступа.
- Система должна обеспечивать мониторинг состояния системы, производительности и логирование событий для диагностики и устранения неисправностей.
- Система должна поддерживать интеграцию с корпоративными сервисами почты для отправки уведомлений и отчётов.
#### 3.6.2. Детальное описание функционала
---
| Функция | Описание |
| ------- | -------- |
| **Администрирование** | |
| &nbsp;&nbsp;&nbsp;&nbsp;.Пользователи | Пользователи с ролью "Администратор" могут управлять пользователями системы в части: </br>&nbsp;&nbsp; - Добавление новых пользователей. </br>&nbsp;&nbsp; - Редактирование данных пользователей (имя, email, роль). </br>&nbsp;&nbsp; - Удаление пользователей. </br>&nbsp;&nbsp; - Назначение ролей и прав доступа. |
| &nbsp;&nbsp;&nbsp;&nbsp;.Роли | Администратор может управлять ролями пользователей: </br>&nbsp;&nbsp; - Создание новых ролей. </br>&nbsp;&nbsp; - Редактирование прав доступа для существующих ролей. </br>&nbsp;&nbsp; - Удаление ролей. |
| &nbsp;&nbsp;&nbsp;&nbsp;.Мониторинг | Пользователи с ролью "Администратор" могут просматривать состояние системы: </br>&nbsp;&nbsp; - Текущие активные пользователи. </br>&nbsp;&nbsp; - Статистика по заявкам и выполненным работам. </br>&nbsp;&nbsp; - Логи событий (ошибки, предупреждения, информационные сообщения, дейсвия пользователей). |
| &nbsp;&nbsp;&nbsp;&nbsp;.Интеграция | Система должна поддерживать интеграцию с корпоративными сервисами почты для отправки уведомлений и отчётов. |

## 4. Нефункциональные требования
### 4.1. Работа в офлайн-режиме
- Brige Client должен обеспечивать возможность работы в офлайн-режиме при отсутствии интернет-соединения.
- Автоматическая или ручная синхронизация данных с сервером при восстановлении соединения, с применением механизмов разрешения конфликтов, если они возникают.
### 4.2. Безопасность
- Все данные должны быть защищены от несанкционированного доступа, включая шифрование персональных данных и использование безопасных протоколов передачи данных.
- Система должна соответствовать требованиям GDPR для обработки и хранения персональных данных.
- Доступ к системе должен быть ограничен в соответствии с ролями пользователей (клиентский доступ для Brige Client и администраторский доступ для управления системой).
### 4.3. Производительность
- Система должна обеспечивать быстрый отклик (не более 3 секунд) при выполнении основных операций, таких как регистрация заявок, ввод данных и загрузка файлов.
- Система должна поддерживать одновременную работу множества пользователей без значительного снижения производительности.
### 4.4. Удобство использования
- Интерфейс Brige Client должен быть интуитивно понятным и простым в использовании, с минимальным количеством шагов для выполнения основных операций.
- Адаптивный дизайн для корректного отображения на любых устройствах, включая мобильные телефоны и планшеты.
- Эффективная навигация между разделами системы, с возможностью быстрого доступа к часто используемым функциям.
### 4.5. Надёжность
- Система должна обеспечивать регулярное резервное копирование всех данных для предотвращения потери информации.
- Логирование событий и ошибок для быстрого устранения неисправностей и анализа производительности.
- Возможность восстановления данных в случае сбоев или ошибок, включая автоматическое восстановление после сбоев сервера.
### 4.6. Энергоэффективность
- Brige Client должен быть оптимизирован для минимального расхода заряда батареи, особенно в режиме офлайн и при слабом покрытии сети Интернет.

## 5. Требования к интерфейсам
### 5.1. Пользовательский интерфейс
- Интерфейс пользователя должен быть современным, минималистичным и адаптированным для мобильных устройств. 
- Образцы экранов ввода, кнопок, выпадающих списков и чекбоксов представлены в приложении в Приложение A: [Макеты интерфейса](ui.md).
### 5.2. Интеграция и API
- Система должна предоставлять API для взаимодействия с другими системами, включая возможность получения и отправки данных о заявках и выполненных работах.
## 6. Системные и аппаратные требования
### 6.1. Системные требования
- Серверная часть должна быть развернута на платформе, поддерживающей микросервисы (например, Docker, Kubernetes).
- База данных должна быть реляционной (например, PostgreSQL, MySQL) или NoSQL (например, MongoDB) в зависимости от требований к данным. 
### 6.2. Аппаратные требования
- Сервер должен иметь достаточные ресурсы для обработки большого объёма данных и одновременных запросов от пользователей, не требующий при этом значительных финансовых затрат. Предпочтительно использовать облачные решения (например, AWS, Azure, Google Cloud) для масштабируемости и гибкости.

## 7. Технический стэк и архитектурное решение
### 7.1. Общая архитектура
Система должна быть построена на основе четырехуровневой архитектуры, которая включает клиентский уровень (Presentation Layer, frontend), инфраструктурный уровень (Infrastructure Layer), уровень приложения (Application Layer, backend) и уровень данных (Data Layer).

#### 7.1.1. Клиентский уровень (Presentation Layer, frontend)
Клиентское приложение Brige Client - это мобильное приложение, которое будет использоваться сотрудниками компании для регистрации заявок, выполнения работ, для взаимодействия с клиентами, а также для администрирования системы (в качестве альтернативы для администрирования будет использоваться отдельное приложение).

Основная задача клиента — отправка данных на обработку и отображение результатов работы системы.

Клиентское приложение должно быть разработано с использованием Flutter, что позволит создать единое решение для мобильных устройств (Android, iOS), а также для десктопных систем (Windows, Linux) и веб-интерфейса.

Brige Client должен поддерживать режим офлайн с локальным хранением данных и последующей синхронизацией с сервером.

#### 7.1.2. Инфраструктурный уровень (Infrastructure Layer)
Инфраструктурный уровень обеспечивает взаимодействие между клиентским приложением и серверной частью системы. Он включает в себя API Gateway, который управляет запросами от клиентов и направляет их к соответствующим микросервисам.  
API Gateway должен обеспечивать следующие функции:
- Маршрутизация запросов к соответствующим микросервисам.
- Балансировка нагрузки между микросервисами.

#### 7.1.3. Уровень приложения (Application Layer, backend)
Серверная часть системы - это ядро, где выполняется основная логика обработки данных. Она должна быть реализована с использованием микросервисной архитектуры, где каждый микросервис отвечает за отдельную функциональность (например, управление заявками, загрузка медиафайлов, интеграция).

Серверная часть должна быть разработана на языке Go (Golang), который обеспечивает высокую производительность, встроенную поддержку конкурентности и простоту развертывания в контейнерах.

#### 7.1.4. Уровень данных (Data Layer)
Уровень данных отвечает за хранение и управление данными, используемыми в системе. Он должен включать в себя следующие компоненты:
- База данных должна быть реляционной (например, PostgreSQL) для хранения структурированных данных о заявках, клиентах и пользователях.
- Для хранения медиафайлов (изображений, документов) рекомендуется использовать объектное хранилище, например, MinIO, которое обеспечивает эффективное хранение и доступ к большим объёмам данных.

Графически схема архитектуры системы представлена на рисунке ниже:
![Архитектура системы](img/architecture.png)

### 7.2. Управление пользователями и безопасность
#### 7.2.1. Централизованное управление идентификацией
  - Keycloak как основа системы управления пользователями и их доступом (IAM)
  - Настраиваемые типы аутентификации для разных категорий пользователей
  #### 7.2.2. Ролевая модель доступа
  - Основные роли: администратор, руководитель, техник, клиент
  - Дополнительные роли: аналитик, диспетчер, аудитор, менеджер по продажам
  - Гибкие разрешения на уровне отдельных функций системы
  - Контекстно-зависимые разрешения (например, доступ только к своим заявкам или ко всем заявкам отдела)
#### 7.2.3. Защита данных
  - Шифрование данных в состоянии покоя (data at rest) для конфиденциальной информации
  - Полное шифрование канала связи (TLS 1.3) для всех коммуникаций
  - Токены JWT с коротким временем жизни для авторизации API
  - Политики безопасности паролей в соответствии с NIST SP 800-63B
  - Регулярные проверки безопасности 

### 7.3. Интеграция и коммуникация
#### 7.3.1. Микросервисная архитектура
  - Разделение системы на независимые микросервисы для управления заявками, пользователями, медиафайлами и интеграциями
  - Использование RESTful API и gRPC для межсервисного взаимодействия
  - Контейнеризация микросервисов с использованием Docker и Kubernetes для оркестрации
  - Автоматическое масштабирование сервисов в зависимости от нагрузки

#### 7.3.2. API Gateway и межсервисное взаимодействие
  - Использование API Gateway (например, Kong или Traefik) для централизованного управления доступом к микросервисам
  - Поддержка синхронных и асинхронных коммуникаций между сервисами
  - Единая точка входа для всех клиентских запросов с маршрутизацией к соответствующим микросервисам

#### 7.3.3. Внешние интеграции
  - Интеграция с внешними системами через REST API и Webhooks
  - Возможность подключения сторонних сервисов для геолокации и уведомлений
  - Использование стандартных протоколов (SMTP, IMAP) для отправки уведомлений по электронной почте
  - Поддержка экспорта данных в различные форматы (PDF, Excel)

### 7.4. Мониторинг и обслуживание
#### 7.4.1. Мониторинг системы
- Использование Prometheus для сбора метрик производительности и бизнес-показателей
- Grafana для визуализации метрик и построения информационных панелей
- Алертинг на базе Alertmanager для оповещения о критических событиях

#### 7.4.2. Операционное обслуживание
- Автоматизированное развертывание через CI/CD pipelines (например, GitLab CI или GitHub Actions)
- Резервное копирование данных с политикой хранения и проверкой целостности
- Планы аварийного восстановления и процедуры переключения на резервные системы

## 8. Обучение и документирование
### 8.1. Обучение пользователей
### 8.1.1. Программа обучения
- Базовое обучение для всех пользователей:
  - Введение в систему Brige Client
  - Основные функции и интерфейс
  - Регистрация заявок и выполнение работ
- Расширенное обучение для администраторов и продвинутых пользователей:
  - Управление пользователями и ролями
  - Настройка системы 
  - Мониторинг и аналитика
  - Устранение распространённых проблем
  - Работа с логами и метриками
  - Поддержка пользователей

### 8.2. Материалы для обучения
- Руководство пользователей в электронном формате
- Встроенные подсказки и инструкции в интерфейсе Brige Client

### 8.3. Техническая документация
- Архитектурная документация:
  - Описание архитектуры системы и её компонентов
  - Диаграммы взаимодействия микросервисов
- Спецификация API
- Руководство по развертыванию:
  - Пошаговая инструкция по установке и настройке серверной части
  - Инструкции по настройке окружения и зависимостей
- Инструкции по обслуживанию и мониторингу
- Процедуры резервного копирования и восстановления:
  
## 9. Приложения
### Приложение A: [Макеты интерфейса](ui.md)
